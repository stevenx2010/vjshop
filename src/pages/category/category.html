<ion-header>
  <ion-navbar>
    <ion-title>
      Category
    </ion-title>
  </ion-navbar>
</ion-header>


<ion-content>
	<ion-grid [style.height]="gridHeight">
		<ion-row>
			<ion-col class="menu" col-3>
				<ion-scroll scrollY="true" [style.height]="scrollHeight">
					<ion-list>
						<ion-item *ngFor="let category of productCategories; let i = index; " (click)="itemSelected(i, category.id)" [style.background-color]="i==clickedItemIndex ? 'white' : '#efefef'" [style.border-left]="i==clickedItemIndex ? '2px solid #00ff00' : 'none'">
							  {{ category.name }}
						</ion-item>
					</ion-list>
				</ion-scroll>
			</ion-col>

			<ion-col col-9>
				<ion-scroll scrollY="true" [style.height]="scrollHeight">

					<div  class="content" *ngIf="clickedItemIndex === 0" >
						<div *ngFor="let product_1 of products_1; let i = index">
						<ion-row class="images">
							<ion-col>
								<div align="center" (click)="toProductDetail(product_1.id)">
									<img src="{{ baseUrl }}{{ product_1.thumbnail_url }}">
								</div>
							</ion-col>
							<ion-col>
								<div *ngIf="i < products_2.length" align="center"  (click)="toProductDetail(products_2[i].id)" >
									<img src="{{ baseUrl }}{{ products_2[i].thumbnail_url }}">
								</div>
							</ion-col>
							<ion-col>
								<div *ngIf="i < products_3.length" align="center"  (click)="toProductDetail(products_3[i].id)">
									<img src="{{ baseUrl }}{{ products_3[i].thumbnail_url }}">
								</div>
							</ion-col>
						</ion-row>

						<ion-row class="text">
							<ion-col >
								<div align="center" (click)="toProductDetail(product_1.id)">
									{{ product_1.model }}
								</div>
							</ion-col>
							<ion-col>
								<div *ngIf="i < products_2.length" align="center" (click)="toProductDetail(products_2[i].id)">
									{{ products_2[i].model }}
								</div>
							</ion-col>
							<ion-col>
								<div *ngIf="i < products_3.length" align="center" (click)="toProductDetail(products_3[i].id)">
									{{ products_3[i].model }}
								</div>
							</ion-col>
						</ion-row>
						</div>
					</div>

					<div class="content-category" *ngIf="clickedItemIndex != 0">
						<div *ngFor="let category of productBySubCategories; let i = index;">
							<ion-row class="category" style="flex-wrap: nowrap;">
								<ion-col></ion-col>
								<ion-col col-1><ion-row class="seperator"></ion-row></ion-col>
								<ion-col col-auto>									
									{{ category.subCategory.name}}
									
								</ion-col>
								<ion-col col-1><ion-row class="seperator"></ion-row></ion-col>
								<ion-col></ion-col>
							</ion-row>
							<div *ngFor="let product of category.products; let j = index;">
							
								<ion-row class="images">
									<ion-col>
										<div *ngIf="j < category.products.length && j % 3 == 0" align="center" (click)="toProductDetail(category.products[j].id)">
											<img src="{{ baseUrl }}{{ category.products[j].thumbnail_url}}">
										</div>
									</ion-col>
									<ion-col>
										<div *ngIf="j+1 < category.products.length && (j+1) % 3 == 1" align="center" (click)="toProductDetail(category.products[j+1].id)">
											<img src="{{ baseUrl }}{{ category.products[j+1].thumbnail_url}}">
										</div>
									</ion-col>
									<ion-col>
										<div *ngIf="j+2 < category.products.length && (j+2) % 3 == 2" align="center" (click)="toProductDetail(category.products[j+2].id)">
											<img src="{{ baseUrl }}{{ category.products[j+2].thumbnail_url}}">
										</div>
									</ion-col>
								</ion-row>

								<ion-row class="text">
									<ion-col>
										<div *ngIf="j < category.products.length && j % 3 == 0" align="center" (click)="toProductDetail(category.products[j].id)">
											{{category.products[j].model}}
										</div>
									</ion-col>
									<ion-col>
										<div *ngIf="j+1 < category.products.length && (j+1) % 3 == 1" align="center" (click)="toProductDetail(category.products[j+1].id)">
											{{category.products[j+1].model}}
										</div>
									</ion-col>
									<ion-col>
										<div *ngIf="j+2 < category.products.length && (j+2) % 3 == 2" align="center" (click)="toProductDetail(category.products[j+2].id)">
											{{category.products[j+2].model}}
										</div>
									</ion-col>
								</ion-row>
							</div>
						</div>
					</div>

				</ion-scroll>
			</ion-col>
		</ion-row>
	</ion-grid>
</ion-content>



<style>
	* {
		margin: 0;
		padding: 0;
		border: none;
	}

	.menu ion-item {
		font-size: 1.3rem;
		text-align: center;

	}

	.menu {
		background-color: #efefef;
	}

	.content img {
		height: 3rem;
	}

	.content ion-col {
		justify-content: center;

	}

	.content .images {
		padding-top: 2.5rem;
	}

	.content .text {
		font-size: 1rem;
	}

	.content-category .category {
		font-size: 1.2rem;
		text-align: center;
		font-weight: bold;
		align-self: center;
		margin-top: 2rem;
		padding-top: 1rem;
		padding-bottom: 1rem;
		flex-wrap: nowrap;
		align-items: center;
	}


	.content-category .images {
		margin-top: 1rem;
		padding: 0;
	}

	.content-category .text {
		height: 0;
	}

	.seperator {
		padding: 0;
		background-color: #efefef;
		color: #efefef;
		font-size: 1px;
		height: 1px;
		align-self: flex-end;
	}


</style>